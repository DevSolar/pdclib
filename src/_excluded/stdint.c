/* stdint.h Tests

   This file is part of the Public Domain C Library (PDCLib).
   Permission is granted to use, modify, and / or redistribute at will.
*/

#include <stdint.h>

#ifdef TEST

#include "_PDCLIB_test.h"

int main( void )
{
    /* The tests are actually much more restrictive / less portable than
       PDCLib's setup of stdint.h, since they assume 8-bit chars and two's
       complement encoding.
       At least the tests failing on an exotic hardware will remind you
       PDCLib has not been tested like that before.
    */

    /* Exact-width */
    TESTEQUAL( 127, INT8_MAX );
    TESTEQUAL( -128, INT8_MIN );
    TESTEQUALU( 255u, UINT8_MAX );

    TESTEQUAL( 32767, INT16_MAX );
    TESTEQUAL( -32768, INT16_MIN );
    TESTEQUALU( 65535u, UINT16_MAX );

    TESTEQUAL( 2147483647, INT32_MAX );
    TESTEQUAL( -2147483648, INT32_MIN );
    TESTEQUALU( 4294967295u, UINT32_MAX );

    TESTEQUAL( 9223372036854775807, INT64_MAX );
    TESTEQUAL( -9223372036854775807 - 1, INT64_MIN );
    TESTEQUALU( 18446744073709551615ul, UINT64_MAX );

    /* Minimum-width */
    TESTEQUAL( 127, INT_LEAST8_MAX );
    TESTEQUAL( -128, INT_LEAST8_MIN );
    TESTEQUALU( 255u, UINT_LEAST8_MAX );

    TESTEQUAL( 32767, INT_LEAST16_MAX );
    TESTEQUAL( -32768, INT_LEAST16_MIN );
    TESTEQUALU( 65535u, UINT_LEAST16_MAX );

    TESTEQUAL( 2147483647, INT_LEAST32_MAX );
    TESTEQUAL( -2147483648, INT_LEAST32_MIN );
    TESTEQUALU( 4294967295u, UINT_LEAST32_MAX );

    TESTEQUAL( 9223372036854775807, INT_LEAST64_MAX );
    TESTEQUAL( -9223372036854775807 - 1, INT_LEAST64_MIN );
    TESTEQUALU( 18446744073709551615ul, UINT_LEAST64_MAX );

    /* Fastest */
    TESTEQUAL( 127, INT_FAST8_MAX );
    TESTEQUAL( -128, INT_FAST8_MIN );
    TESTEQUALU( 255u, UINT_FAST8_MAX );

    TESTEQUAL( 9223372036854775807, INT_FAST16_MAX );
    TESTEQUAL( -9223372036854775807 - 1, INT_FAST16_MIN );
    TESTEQUALU( 18446744073709551615ul, UINT_FAST16_MAX );

    TESTEQUAL( 9223372036854775807, INT_FAST32_MAX );
    TESTEQUAL( -9223372036854775807 - 1, INT_FAST32_MIN );
    TESTEQUALU( 18446744073709551615ul, UINT_FAST32_MAX );

    TESTEQUAL( 9223372036854775807, INT_FAST64_MAX );
    TESTEQUAL( -9223372036854775807 - 1, INT_FAST64_MIN );
    TESTEQUALU( 18446744073709551615ul, UINT_FAST64_MAX );

    /* Intptr */
    TESTEQUAL( 9223372036854775807, INTPTR_MAX );
    TESTEQUAL( -9223372036854775807 - 1, INTPTR_MIN );
    TESTEQUALU( 18446744073709551615ul, UINTPTR_MAX );

    /* Intmax */
    TESTEQUAL( 9223372036854775807, INTPTR_MAX );
    TESTEQUAL( -9223372036854775807 - 1, INTPTR_MIN );
    TESTEQUALU( 18446744073709551615ul, UINTPTR_MAX );

    /* Ptrdiff */
    TESTEQUAL( 9223372036854775807, PTRDIFF_MAX );
    TESTEQUAL( -9223372036854775807 - 1, PTRDIFF_MIN );

    /* Atomic */
    TESTEQUAL( 2147483647, SIG_ATOMIC_MAX );
    TESTEQUAL( -2147483648, SIG_ATOMIC_MIN );

    /* Size */
    TESTEQUALU( 18446744073709551615ul, SIZE_MAX );

    /* Wchar */
    TESTEQUAL( 2147483647, WCHAR_MAX );
    TESTEQUAL( -2147483648, WCHAR_MIN );

    /* Wint */
    TESTEQUALU( 4294967295u, WINT_MAX );
    TESTEQUAL( 0, WINT_MIN );

    return TEST_RESULTS;
}

#endif
